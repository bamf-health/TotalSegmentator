#!/usr/bin/env python
from pathlib import Path
import argparse

import nrrd
import SimpleITK as sitk

TOTAL_METADATA = {
    "Segment0_Color": "0.615686 0.423529 0.635294",
    "Segment0_ColorAutoGenerated": "1",
    "Segment0_ID": "spleen",
    "Segment0_LabelValue": "1",
    "Segment0_Layer": "0",
    "Segment0_Name": "spleen",
    "Segment0_NameAutoGenerated": "1",
    "Segment0_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^78961009^Spleen~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment1_Color": "0.72549 0.4 0.32549",
    "Segment1_ColorAutoGenerated": "1",
    "Segment1_ID": "kidney_right",
    "Segment1_LabelValue": "2",
    "Segment1_Layer": "0",
    "Segment1_Name": "right kidney",
    "Segment1_NameAutoGenerated": "1",
    "Segment1_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^64033007^Kidney~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment2_Color": "0.72549 0.4 0.32549",
    "Segment2_ColorAutoGenerated": "1",
    "Segment2_ID": "kidney_left",
    "Segment2_LabelValue": "3",
    "Segment2_Layer": "0",
    "Segment2_Name": "left kidney",
    "Segment2_NameAutoGenerated": "1",
    "Segment2_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^64033007^Kidney~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment3_Color": "0.545098 0.588235 0.384314",
    "Segment3_ColorAutoGenerated": "1",
    "Segment3_ID": "gallbladder",
    "Segment3_LabelValue": "4",
    "Segment3_Layer": "0",
    "Segment3_Name": "gallbladder",
    "Segment3_NameAutoGenerated": "1",
    "Segment3_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^28231008^Gallbladder~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment4_Color": "0.866667 0.509804 0.396078",
    "Segment4_ColorAutoGenerated": "1",
    "Segment4_ID": "liver",
    "Segment4_LabelValue": "5",
    "Segment4_Layer": "0",
    "Segment4_Name": "liver",
    "Segment4_NameAutoGenerated": "1",
    "Segment4_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^10200004^Liver~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment5_Color": "0.847059 0.517647 0.411765",
    "Segment5_ColorAutoGenerated": "1",
    "Segment5_ID": "stomach",
    "Segment5_LabelValue": "6",
    "Segment5_Layer": "0",
    "Segment5_Name": "stomach",
    "Segment5_NameAutoGenerated": "1",
    "Segment5_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^69695003^Stomach~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment6_Color": "0.878431 0.380392 0.298039",
    "Segment6_ColorAutoGenerated": "1",
    "Segment6_ID": "aorta",
    "Segment6_LabelValue": "7",
    "Segment6_Layer": "0",
    "Segment6_Name": "aorta",
    "Segment6_NameAutoGenerated": "1",
    "Segment6_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^15825003^Aorta~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment7_Color": "0 0.592157 0.807843",
    "Segment7_ColorAutoGenerated": "1",
    "Segment7_ID": "inferior_vena_cava",
    "Segment7_LabelValue": "8",
    "Segment7_Layer": "0",
    "Segment7_Name": "inferior vena cava",
    "Segment7_NameAutoGenerated": "1",
    "Segment7_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^64131007^Inferior vena cava~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment8_Color": "0 0.592157 0.807843",
    "Segment8_ColorAutoGenerated": "1",
    "Segment8_ID": "portal_vein_and_splenic_vein",
    "Segment8_LabelValue": "9",
    "Segment8_Layer": "0",
    "Segment8_Name": "portal vein",
    "Segment8_NameAutoGenerated": "1",
    "Segment8_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^32764006^Portal vein~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment9_Color": "0.976471 0.705882 0.435294",
    "Segment9_ColorAutoGenerated": "1",
    "Segment9_ID": "pancreas",
    "Segment9_LabelValue": "10",
    "Segment9_Layer": "0",
    "Segment9_Name": "pancreas",
    "Segment9_NameAutoGenerated": "1",
    "Segment9_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^15776009^Pancreas~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment10_Color": "0.976471 0.729412 0.588235",
    "Segment10_ColorAutoGenerated": "1",
    "Segment10_ID": "adrenal_gland_right",
    "Segment10_LabelValue": "11",
    "Segment10_Layer": "0",
    "Segment10_Name": "right adrenal gland",
    "Segment10_NameAutoGenerated": "1",
    "Segment10_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^23451007^Adrenal gland~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment11_Color": "0.976471 0.729412 0.588235",
    "Segment11_ColorAutoGenerated": "1",
    "Segment11_ID": "adrenal_gland_left",
    "Segment11_LabelValue": "12",
    "Segment11_Layer": "0",
    "Segment11_Name": "left adrenal gland",
    "Segment11_NameAutoGenerated": "1",
    "Segment11_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^23451007^Adrenal gland~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment12_Color": "0.67451 0.541176 0.45098",
    "Segment12_ColorAutoGenerated": "1",
    "Segment12_ID": "lung_upper_lobe_left",
    "Segment12_LabelValue": "13",
    "Segment12_Layer": "0",
    "Segment12_Name": "superior lobe of left lung",
    "Segment12_NameAutoGenerated": "1",
    "Segment12_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^45653009^Upper lobe of lung~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment13_Color": "0.878431 0.729412 0.635294",
    "Segment13_ColorAutoGenerated": "1",
    "Segment13_ID": "lung_lower_lobe_left",
    "Segment13_LabelValue": "14",
    "Segment13_Layer": "0",
    "Segment13_Name": "inferior lobe of left lung",
    "Segment13_NameAutoGenerated": "1",
    "Segment13_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^90572001^Lower lobe of lung~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment14_Color": "0.67451 0.541176 0.45098",
    "Segment14_ColorAutoGenerated": "1",
    "Segment14_ID": "lung_upper_lobe_right",
    "Segment14_LabelValue": "15",
    "Segment14_Layer": "0",
    "Segment14_Name": "superior lobe of right lung",
    "Segment14_NameAutoGenerated": "1",
    "Segment14_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^45653009^Upper lobe of lung~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment15_Color": "0.792157 0.643137 0.54902",
    "Segment15_ColorAutoGenerated": "1",
    "Segment15_ID": "lung_middle_lobe_right",
    "Segment15_LabelValue": "16",
    "Segment15_Layer": "0",
    "Segment15_Name": "middle lobe of right lung",
    "Segment15_NameAutoGenerated": "1",
    "Segment15_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^72481006^Middle lobe of right lung~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment16_Color": "0.878431 0.729412 0.635294",
    "Segment16_ColorAutoGenerated": "1",
    "Segment16_ID": "lung_lower_lobe_right",
    "Segment16_LabelValue": "17",
    "Segment16_Layer": "0",
    "Segment16_Name": "inferior lobe of right lung",
    "Segment16_NameAutoGenerated": "1",
    "Segment16_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^90572001^Lower lobe of lung~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment17_Color": "0.831373 0.737255 0.4",
    "Segment17_ColorAutoGenerated": "1",
    "Segment17_ID": "vertebrae_L5",
    "Segment17_LabelValue": "18",
    "Segment17_Layer": "0",
    "Segment17_Name": "L5 vertebra",
    "Segment17_NameAutoGenerated": "1",
    "Segment17_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^49668003^L5 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment18_Color": "0.831373 0.737255 0.4",
    "Segment18_ColorAutoGenerated": "1",
    "Segment18_ID": "vertebrae_L4",
    "Segment18_LabelValue": "19",
    "Segment18_Layer": "0",
    "Segment18_Name": "L4 vertebra",
    "Segment18_NameAutoGenerated": "1",
    "Segment18_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^11994002^L4 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment19_Color": "0.831373 0.737255 0.4",
    "Segment19_ColorAutoGenerated": "1",
    "Segment19_ID": "vertebrae_L3",
    "Segment19_LabelValue": "20",
    "Segment19_Layer": "0",
    "Segment19_Name": "L3 vertebra",
    "Segment19_NameAutoGenerated": "1",
    "Segment19_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^36470004^L3 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment20_Color": "0.831373 0.737255 0.4",
    "Segment20_ColorAutoGenerated": "1",
    "Segment20_ID": "vertebrae_L2",
    "Segment20_LabelValue": "21",
    "Segment20_Layer": "0",
    "Segment20_Name": "L2 vertebra",
    "Segment20_NameAutoGenerated": "1",
    "Segment20_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^14293000^L2 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment21_Color": "0.831373 0.737255 0.4",
    "Segment21_ColorAutoGenerated": "1",
    "Segment21_ID": "vertebrae_L1",
    "Segment21_LabelValue": "22",
    "Segment21_Layer": "0",
    "Segment21_Name": "L1 vertebra",
    "Segment21_NameAutoGenerated": "1",
    "Segment21_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^66794005^L1 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment22_Color": "0.886275 0.792157 0.52549",
    "Segment22_ColorAutoGenerated": "1",
    "Segment22_ID": "vertebrae_T12",
    "Segment22_LabelValue": "23",
    "Segment22_Layer": "0",
    "Segment22_Name": "T12 vertebra",
    "Segment22_NameAutoGenerated": "1",
    "Segment22_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^23215003^T12 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment23_Color": "0.886275 0.792157 0.52549",
    "Segment23_ColorAutoGenerated": "1",
    "Segment23_ID": "vertebrae_T11",
    "Segment23_LabelValue": "24",
    "Segment23_Layer": "0",
    "Segment23_Name": "T11 vertebra",
    "Segment23_NameAutoGenerated": "1",
    "Segment23_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^12989004^T11 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment24_Color": "0.886275 0.792157 0.52549",
    "Segment24_ColorAutoGenerated": "1",
    "Segment24_ID": "vertebrae_T10",
    "Segment24_LabelValue": "25",
    "Segment24_Layer": "0",
    "Segment24_Name": "T10 vertebra",
    "Segment24_NameAutoGenerated": "1",
    "Segment24_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^7610001^T10 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment25_Color": "0.886275 0.792157 0.52549",
    "Segment25_ColorAutoGenerated": "1",
    "Segment25_ID": "vertebrae_T9",
    "Segment25_LabelValue": "26",
    "Segment25_Layer": "0",
    "Segment25_Name": "T9 vertebra",
    "Segment25_NameAutoGenerated": "1",
    "Segment25_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^82687006^T9 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment26_Color": "0.886275 0.792157 0.52549",
    "Segment26_ColorAutoGenerated": "1",
    "Segment26_ID": "vertebrae_T8",
    "Segment26_LabelValue": "27",
    "Segment26_Layer": "0",
    "Segment26_Name": "T8 vertebra",
    "Segment26_NameAutoGenerated": "1",
    "Segment26_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^11068009^T8 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment27_Color": "0.886275 0.792157 0.52549",
    "Segment27_ColorAutoGenerated": "1",
    "Segment27_ID": "vertebrae_T7",
    "Segment27_LabelValue": "28",
    "Segment27_Layer": "0",
    "Segment27_Name": "T7 vertebra",
    "Segment27_NameAutoGenerated": "1",
    "Segment27_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^62487009^T7 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment28_Color": "0.886275 0.792157 0.52549",
    "Segment28_ColorAutoGenerated": "1",
    "Segment28_ID": "vertebrae_T6",
    "Segment28_LabelValue": "29",
    "Segment28_Layer": "0",
    "Segment28_Name": "T6 vertebra",
    "Segment28_NameAutoGenerated": "1",
    "Segment28_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^45296009^T6 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment29_Color": "0.886275 0.792157 0.52549",
    "Segment29_ColorAutoGenerated": "1",
    "Segment29_ID": "vertebrae_T5",
    "Segment29_LabelValue": "30",
    "Segment29_Layer": "0",
    "Segment29_Name": "T5 vertebra",
    "Segment29_NameAutoGenerated": "1",
    "Segment29_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^56401006^T5 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment30_Color": "0.886275 0.792157 0.52549",
    "Segment30_ColorAutoGenerated": "1",
    "Segment30_ID": "vertebrae_T4",
    "Segment30_LabelValue": "31",
    "Segment30_Layer": "0",
    "Segment30_Name": "T4 vertebra",
    "Segment30_NameAutoGenerated": "1",
    "Segment30_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^73071006^T4 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment31_Color": "0.886275 0.792157 0.52549",
    "Segment31_ColorAutoGenerated": "1",
    "Segment31_ID": "vertebrae_T3",
    "Segment31_LabelValue": "32",
    "Segment31_Layer": "0",
    "Segment31_Name": "T3 vertebra",
    "Segment31_NameAutoGenerated": "1",
    "Segment31_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^1626008^T3 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment32_Color": "0.886275 0.792157 0.52549",
    "Segment32_ColorAutoGenerated": "1",
    "Segment32_ID": "vertebrae_T2",
    "Segment32_LabelValue": "33",
    "Segment32_Layer": "0",
    "Segment32_Name": "T2 vertebra",
    "Segment32_NameAutoGenerated": "1",
    "Segment32_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^53733008^T2 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment33_Color": "0.886275 0.792157 0.52549",
    "Segment33_ColorAutoGenerated": "1",
    "Segment33_ID": "vertebrae_T1",
    "Segment33_LabelValue": "34",
    "Segment33_Layer": "0",
    "Segment33_Name": "T1 vertebra",
    "Segment33_NameAutoGenerated": "1",
    "Segment33_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^64864005^T1 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment34_Color": "1 1 0.811765",
    "Segment34_ColorAutoGenerated": "1",
    "Segment34_ID": "vertebrae_C7",
    "Segment34_LabelValue": "35",
    "Segment34_Layer": "0",
    "Segment34_Name": "C7 vertebra",
    "Segment34_NameAutoGenerated": "1",
    "Segment34_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^87391001^C7 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment35_Color": "1 1 0.811765",
    "Segment35_ColorAutoGenerated": "1",
    "Segment35_ID": "vertebrae_C6",
    "Segment35_LabelValue": "36",
    "Segment35_Layer": "0",
    "Segment35_Name": "C6 vertebra",
    "Segment35_NameAutoGenerated": "1",
    "Segment35_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^36054005^C6 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment36_Color": "1 1 0.811765",
    "Segment36_ColorAutoGenerated": "1",
    "Segment36_ID": "vertebrae_C5",
    "Segment36_LabelValue": "37",
    "Segment36_Layer": "0",
    "Segment36_Name": "C5 vertebra",
    "Segment36_NameAutoGenerated": "1",
    "Segment36_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^36978003^C5 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment37_Color": "1 1 0.811765",
    "Segment37_ColorAutoGenerated": "1",
    "Segment37_ID": "vertebrae_C4",
    "Segment37_LabelValue": "38",
    "Segment37_Layer": "0",
    "Segment37_Name": "C4 vertebra",
    "Segment37_NameAutoGenerated": "1",
    "Segment37_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^5329002^C4 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment38_Color": "1 1 0.811765",
    "Segment38_ColorAutoGenerated": "1",
    "Segment38_ID": "vertebrae_C3",
    "Segment38_LabelValue": "39",
    "Segment38_Layer": "0",
    "Segment38_Name": "C3 vertebra",
    "Segment38_NameAutoGenerated": "1",
    "Segment38_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^113205007^C3 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment39_Color": "1 1 0.811765",
    "Segment39_ColorAutoGenerated": "1",
    "Segment39_ID": "vertebrae_C2",
    "Segment39_LabelValue": "40",
    "Segment39_Layer": "0",
    "Segment39_Name": "C2 vertebra",
    "Segment39_NameAutoGenerated": "1",
    "Segment39_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^39976000^C2 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment40_Color": "1 1 0.811765",
    "Segment40_ColorAutoGenerated": "1",
    "Segment40_ID": "vertebrae_C1",
    "Segment40_LabelValue": "41",
    "Segment40_Layer": "0",
    "Segment40_Name": "C1 vertebra",
    "Segment40_NameAutoGenerated": "1",
    "Segment40_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^14806007^C1 vertebra~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment41_Color": "0.827451 0.670588 0.560784",
    "Segment41_ColorAutoGenerated": "1",
    "Segment41_ID": "esophagus",
    "Segment41_LabelValue": "42",
    "Segment41_Layer": "0",
    "Segment41_Name": "esophagus",
    "Segment41_NameAutoGenerated": "1",
    "Segment41_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^32849002^Esophagus~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment42_Color": "0.713725 0.894118 1",
    "Segment42_ColorAutoGenerated": "1",
    "Segment42_ID": "trachea",
    "Segment42_LabelValue": "43",
    "Segment42_Layer": "0",
    "Segment42_Name": "trachea",
    "Segment42_NameAutoGenerated": "1",
    "Segment42_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^44567001^Trachea~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment43_Color": "0.807843 0.431373 0.329412",
    "Segment43_ColorAutoGenerated": "1",
    "Segment43_ID": "heart_myocardium",
    "Segment43_LabelValue": "44",
    "Segment43_Layer": "0",
    "Segment43_Name": "heart",
    "Segment43_NameAutoGenerated": "1",
    "Segment43_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^80891009^Heart~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment44_Color": "0.796078 0.423529 0.317647",
    "Segment44_ColorAutoGenerated": "1",
    "Segment44_ID": "heart_atrium_left",
    "Segment44_LabelValue": "45",
    "Segment44_Layer": "0",
    "Segment44_Name": "left atrium",
    "Segment44_NameAutoGenerated": "1",
    "Segment44_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^82471001^Left atrium~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment45_Color": "0.596078 0.215686 0.0509804",
    "Segment45_ColorAutoGenerated": "1",
    "Segment45_ID": "heart_ventricle_left",
    "Segment45_LabelValue": "46",
    "Segment45_Layer": "0",
    "Segment45_Name": "left ventricle of heart",
    "Segment45_NameAutoGenerated": "1",
    "Segment45_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^87878005^Left ventricle~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment46_Color": "0.823529 0.45098 0.34902",
    "Segment46_ColorAutoGenerated": "1",
    "Segment46_ID": "heart_atrium_right",
    "Segment46_LabelValue": "47",
    "Segment46_Layer": "0",
    "Segment46_Name": "right atrium",
    "Segment46_NameAutoGenerated": "1",
    "Segment46_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^73829009^Right atrium~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment47_Color": "0.709804 0.333333 0.223529",
    "Segment47_ColorAutoGenerated": "1",
    "Segment47_ID": "heart_ventricle_right",
    "Segment47_LabelValue": "48",
    "Segment47_Layer": "0",
    "Segment47_Name": "right ventricle of heart",
    "Segment47_NameAutoGenerated": "1",
    "Segment47_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^53085002^Right ventricle~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment48_Color": "0 0.478431 0.670588",
    "Segment48_ColorAutoGenerated": "1",
    "Segment48_ID": "pulmonary_artery",
    "Segment48_LabelValue": "49",
    "Segment48_Layer": "0",
    "Segment48_Name": "pulmonary artery",
    "Segment48_NameAutoGenerated": "1",
    "Segment48_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^81040000^Pulmonary artery~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment49_Color": "0.980392 0.980392 0.882353",
    "Segment49_ColorAutoGenerated": "1",
    "Segment49_ID": "brain",
    "Segment49_LabelValue": "50",
    "Segment49_Layer": "0",
    "Segment49_Name": "brain",
    "Segment49_NameAutoGenerated": "1",
    "Segment49_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^12738006^Brain~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment50_Color": "0.847059 0.396078 0.309804",
    "Segment50_ColorAutoGenerated": "1",
    "Segment50_ID": "iliac_artery_left",
    "Segment50_LabelValue": "51",
    "Segment50_Layer": "0",
    "Segment50_Name": "left common iliac artery",
    "Segment50_NameAutoGenerated": "1",
    "Segment50_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^73634005^Common iliac artery~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment51_Color": "0.847059 0.396078 0.309804",
    "Segment51_ColorAutoGenerated": "1",
    "Segment51_ID": "iliac_artery_right",
    "Segment51_LabelValue": "52",
    "Segment51_Layer": "0",
    "Segment51_Name": "right common iliac artery",
    "Segment51_NameAutoGenerated": "1",
    "Segment51_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^73634005^Common iliac artery~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment52_Color": "0 0.592157 0.807843",
    "Segment52_ColorAutoGenerated": "1",
    "Segment52_ID": "iliac_vena_left",
    "Segment52_LabelValue": "53",
    "Segment52_Layer": "0",
    "Segment52_Name": "left common iliac vein",
    "Segment52_NameAutoGenerated": "1",
    "Segment52_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^46027005^Common iliac vein~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment53_Color": "0 0.592157 0.807843",
    "Segment53_ColorAutoGenerated": "1",
    "Segment53_ID": "iliac_vena_right",
    "Segment53_LabelValue": "54",
    "Segment53_Layer": "0",
    "Segment53_Name": "right common iliac vein",
    "Segment53_NameAutoGenerated": "1",
    "Segment53_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^46027005^Common iliac vein~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment54_Color": "0.803922 0.654902 0.556863",
    "Segment54_ColorAutoGenerated": "1",
    "Segment54_ID": "small_bowel",
    "Segment54_LabelValue": "55",
    "Segment54_Layer": "0",
    "Segment54_Name": "small bowel",
    "Segment54_NameAutoGenerated": "1",
    "Segment54_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^30315005^Small Intestine~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment55_Color": "1 0.992157 0.898039",
    "Segment55_ColorAutoGenerated": "1",
    "Segment55_ID": "duodenum",
    "Segment55_LabelValue": "56",
    "Segment55_Layer": "0",
    "Segment55_Name": "duodenum",
    "Segment55_NameAutoGenerated": "1",
    "Segment55_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^38848004^Duodenum~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment56_Color": "0.8 0.658824 0.560784",
    "Segment56_ColorAutoGenerated": "1",
    "Segment56_ID": "colon",
    "Segment56_LabelValue": "57",
    "Segment56_Layer": "0",
    "Segment56_Name": "colon",
    "Segment56_NameAutoGenerated": "1",
    "Segment56_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^71854001^Colon~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment57_Color": "0.992157 0.909804 0.619608",
    "Segment57_ColorAutoGenerated": "1",
    "Segment57_ID": "rib_left_1",
    "Segment57_LabelValue": "58",
    "Segment57_Layer": "0",
    "Segment57_Name": "left rib 1",
    "Segment57_NameAutoGenerated": "1",
    "Segment57_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^48535007^First rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment58_Color": "0.992157 0.909804 0.619608",
    "Segment58_ColorAutoGenerated": "1",
    "Segment58_ID": "rib_left_2",
    "Segment58_LabelValue": "59",
    "Segment58_Layer": "0",
    "Segment58_Name": "left rib 2",
    "Segment58_NameAutoGenerated": "1",
    "Segment58_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78247007^Second rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment59_Color": "0.992157 0.909804 0.619608",
    "Segment59_ColorAutoGenerated": "1",
    "Segment59_ID": "rib_left_3",
    "Segment59_LabelValue": "60",
    "Segment59_Layer": "0",
    "Segment59_Name": "left rib 3",
    "Segment59_NameAutoGenerated": "1",
    "Segment59_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^25888004^Third rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment60_Color": "0.992157 0.909804 0.619608",
    "Segment60_ColorAutoGenerated": "1",
    "Segment60_ID": "rib_left_4",
    "Segment60_LabelValue": "61",
    "Segment60_Layer": "0",
    "Segment60_Name": "left rib 4",
    "Segment60_NameAutoGenerated": "1",
    "Segment60_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^25523003^Fourth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment61_Color": "0.992157 0.909804 0.619608",
    "Segment61_ColorAutoGenerated": "1",
    "Segment61_ID": "rib_left_5",
    "Segment61_LabelValue": "62",
    "Segment61_Layer": "0",
    "Segment61_Name": "left rib 5",
    "Segment61_NameAutoGenerated": "1",
    "Segment61_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^15339008^Fifth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment62_Color": "0.992157 0.909804 0.619608",
    "Segment62_ColorAutoGenerated": "1",
    "Segment62_ID": "rib_left_6",
    "Segment62_LabelValue": "63",
    "Segment62_Layer": "0",
    "Segment62_Name": "left rib 6",
    "Segment62_NameAutoGenerated": "1",
    "Segment62_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^59558009^Sixth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment63_Color": "0.992157 0.909804 0.619608",
    "Segment63_ColorAutoGenerated": "1",
    "Segment63_ID": "rib_left_7",
    "Segment63_LabelValue": "64",
    "Segment63_Layer": "0",
    "Segment63_Name": "left rib 7",
    "Segment63_NameAutoGenerated": "1",
    "Segment63_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^24915002^Seventh rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment64_Color": "0.992157 0.909804 0.619608",
    "Segment64_ColorAutoGenerated": "1",
    "Segment64_ID": "rib_left_8",
    "Segment64_LabelValue": "65",
    "Segment64_Layer": "0",
    "Segment64_Name": "left rib 8",
    "Segment64_NameAutoGenerated": "1",
    "Segment64_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^5953002^Eighth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment65_Color": "0.992157 0.909804 0.619608",
    "Segment65_ColorAutoGenerated": "1",
    "Segment65_ID": "rib_left_9",
    "Segment65_LabelValue": "66",
    "Segment65_Layer": "0",
    "Segment65_Name": "left rib 9",
    "Segment65_NameAutoGenerated": "1",
    "Segment65_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^22565002^Ninth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment66_Color": "0.992157 0.909804 0.619608",
    "Segment66_ColorAutoGenerated": "1",
    "Segment66_ID": "rib_left_10",
    "Segment66_LabelValue": "67",
    "Segment66_Layer": "0",
    "Segment66_Name": "left rib 10",
    "Segment66_NameAutoGenerated": "1",
    "Segment66_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^77644006^Tenth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment67_Color": "0.992157 0.909804 0.619608",
    "Segment67_ColorAutoGenerated": "1",
    "Segment67_ID": "rib_left_11",
    "Segment67_LabelValue": "68",
    "Segment67_Layer": "0",
    "Segment67_Name": "left rib 11",
    "Segment67_NameAutoGenerated": "1",
    "Segment67_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^58830002^Eleventh rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment68_Color": "0.992157 0.909804 0.619608",
    "Segment68_ColorAutoGenerated": "1",
    "Segment68_ID": "rib_left_12",
    "Segment68_LabelValue": "69",
    "Segment68_Layer": "0",
    "Segment68_Name": "left rib 12",
    "Segment68_NameAutoGenerated": "1",
    "Segment68_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^43993008^Twelfth rib~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment69_Color": "0.992157 0.909804 0.619608",
    "Segment69_ColorAutoGenerated": "1",
    "Segment69_ID": "rib_right_1",
    "Segment69_LabelValue": "70",
    "Segment69_Layer": "0",
    "Segment69_Name": "right rib 1",
    "Segment69_NameAutoGenerated": "1",
    "Segment69_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^48535007^First rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment70_Color": "0.992157 0.909804 0.619608",
    "Segment70_ColorAutoGenerated": "1",
    "Segment70_ID": "rib_right_2",
    "Segment70_LabelValue": "71",
    "Segment70_Layer": "0",
    "Segment70_Name": "right rib 2",
    "Segment70_NameAutoGenerated": "1",
    "Segment70_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78247007^Second rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment71_Color": "0.992157 0.909804 0.619608",
    "Segment71_ColorAutoGenerated": "1",
    "Segment71_ID": "rib_right_3",
    "Segment71_LabelValue": "72",
    "Segment71_Layer": "0",
    "Segment71_Name": "right rib 3",
    "Segment71_NameAutoGenerated": "1",
    "Segment71_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^25888004^Third rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment72_Color": "0.992157 0.909804 0.619608",
    "Segment72_ColorAutoGenerated": "1",
    "Segment72_ID": "rib_right_4",
    "Segment72_LabelValue": "73",
    "Segment72_Layer": "0",
    "Segment72_Name": "right rib 4",
    "Segment72_NameAutoGenerated": "1",
    "Segment72_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^25523003^Fourth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment73_Color": "0.992157 0.909804 0.619608",
    "Segment73_ColorAutoGenerated": "1",
    "Segment73_ID": "rib_right_5",
    "Segment73_LabelValue": "74",
    "Segment73_Layer": "0",
    "Segment73_Name": "right rib 5",
    "Segment73_NameAutoGenerated": "1",
    "Segment73_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^15339008^Fifth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment74_Color": "0.992157 0.909804 0.619608",
    "Segment74_ColorAutoGenerated": "1",
    "Segment74_ID": "rib_right_6",
    "Segment74_LabelValue": "75",
    "Segment74_Layer": "0",
    "Segment74_Name": "right rib 6",
    "Segment74_NameAutoGenerated": "1",
    "Segment74_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^59558009^Sixth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment75_Color": "0.992157 0.909804 0.619608",
    "Segment75_ColorAutoGenerated": "1",
    "Segment75_ID": "rib_right_7",
    "Segment75_LabelValue": "76",
    "Segment75_Layer": "0",
    "Segment75_Name": "right rib 7",
    "Segment75_NameAutoGenerated": "1",
    "Segment75_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^24915002^Seventh rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment76_Color": "0.992157 0.909804 0.619608",
    "Segment76_ColorAutoGenerated": "1",
    "Segment76_ID": "rib_right_8",
    "Segment76_LabelValue": "77",
    "Segment76_Layer": "0",
    "Segment76_Name": "right rib 8",
    "Segment76_NameAutoGenerated": "1",
    "Segment76_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^5953002^Eighth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment77_Color": "0.992157 0.909804 0.619608",
    "Segment77_ColorAutoGenerated": "1",
    "Segment77_ID": "rib_right_9",
    "Segment77_LabelValue": "78",
    "Segment77_Layer": "0",
    "Segment77_Name": "right rib 9",
    "Segment77_NameAutoGenerated": "1",
    "Segment77_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^22565002^Ninth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment78_Color": "0.992157 0.909804 0.619608",
    "Segment78_ColorAutoGenerated": "1",
    "Segment78_ID": "rib_right_10",
    "Segment78_LabelValue": "79",
    "Segment78_Layer": "0",
    "Segment78_Name": "right rib 10",
    "Segment78_NameAutoGenerated": "1",
    "Segment78_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^77644006^Tenth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment79_Color": "0.992157 0.909804 0.619608",
    "Segment79_ColorAutoGenerated": "1",
    "Segment79_ID": "rib_right_11",
    "Segment79_LabelValue": "80",
    "Segment79_Layer": "0",
    "Segment79_Name": "right rib 11",
    "Segment79_NameAutoGenerated": "1",
    "Segment79_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^58830002^Eleventh rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment80_Color": "0.992157 0.909804 0.619608",
    "Segment80_ColorAutoGenerated": "1",
    "Segment80_ID": "rib_right_12",
    "Segment80_LabelValue": "81",
    "Segment80_Layer": "0",
    "Segment80_Name": "right rib 12",
    "Segment80_NameAutoGenerated": "1",
    "Segment80_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^43993008^Twelfth rib~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment81_Color": "0.803922 0.701961 0.423529",
    "Segment81_ColorAutoGenerated": "1",
    "Segment81_ID": "humerus_left",
    "Segment81_LabelValue": "82",
    "Segment81_Layer": "0",
    "Segment81_Name": "left humerus",
    "Segment81_NameAutoGenerated": "1",
    "Segment81_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^85050009^Humerus~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment82_Color": "0.803922 0.701961 0.423529",
    "Segment82_ColorAutoGenerated": "1",
    "Segment82_ID": "humerus_right",
    "Segment82_LabelValue": "83",
    "Segment82_Layer": "0",
    "Segment82_Name": "right humerus",
    "Segment82_NameAutoGenerated": "1",
    "Segment82_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^85050009^Humerus~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment83_Color": "0.831373 0.737255 0.4",
    "Segment83_ColorAutoGenerated": "1",
    "Segment83_ID": "scapula_left",
    "Segment83_LabelValue": "84",
    "Segment83_Layer": "0",
    "Segment83_Name": "left scapula",
    "Segment83_NameAutoGenerated": "1",
    "Segment83_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^79601000^Scapula~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment84_Color": "0.831373 0.737255 0.4",
    "Segment84_ColorAutoGenerated": "1",
    "Segment84_ID": "scapula_right",
    "Segment84_LabelValue": "85",
    "Segment84_Layer": "0",
    "Segment84_Name": "right scapula",
    "Segment84_NameAutoGenerated": "1",
    "Segment84_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^79601000^Scapula~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment85_Color": "0.803922 0.701961 0.423529",
    "Segment85_ColorAutoGenerated": "1",
    "Segment85_ID": "clavicula_left",
    "Segment85_LabelValue": "86",
    "Segment85_Layer": "0",
    "Segment85_Name": "left clavicle",
    "Segment85_NameAutoGenerated": "1",
    "Segment85_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^51299004^Clavicle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment86_Color": "0.803922 0.701961 0.423529",
    "Segment86_ColorAutoGenerated": "1",
    "Segment86_ID": "clavicula_right",
    "Segment86_LabelValue": "87",
    "Segment86_Layer": "0",
    "Segment86_Name": "right clavicle",
    "Segment86_NameAutoGenerated": "1",
    "Segment86_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^51299004^Clavicle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment87_Color": "1 0.933333 0.666667",
    "Segment87_ColorAutoGenerated": "1",
    "Segment87_ID": "femur_left",
    "Segment87_LabelValue": "88",
    "Segment87_Layer": "0",
    "Segment87_Name": "left femur",
    "Segment87_NameAutoGenerated": "1",
    "Segment87_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^71341001^Femur~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment88_Color": "1 0.933333 0.666667",
    "Segment88_ColorAutoGenerated": "1",
    "Segment88_ID": "femur_right",
    "Segment88_LabelValue": "89",
    "Segment88_Layer": "0",
    "Segment88_Name": "right femur",
    "Segment88_NameAutoGenerated": "1",
    "Segment88_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^71341001^Femur~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment89_Color": "0.831373 0.737255 0.4",
    "Segment89_ColorAutoGenerated": "1",
    "Segment89_ID": "hip_left",
    "Segment89_LabelValue": "90",
    "Segment89_Layer": "0",
    "Segment89_Name": "left hip",
    "Segment89_NameAutoGenerated": "1",
    "Segment89_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^29836001^Hip~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment90_Color": "0.831373 0.737255 0.4",
    "Segment90_ColorAutoGenerated": "1",
    "Segment90_ID": "hip_right",
    "Segment90_LabelValue": "91",
    "Segment90_Layer": "0",
    "Segment90_Name": "right hip",
    "Segment90_NameAutoGenerated": "1",
    "Segment90_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^29836001^Hip~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment91_Color": "0.831373 0.737255 0.4",
    "Segment91_ColorAutoGenerated": "1",
    "Segment91_ID": "sacrum",
    "Segment91_LabelValue": "92",
    "Segment91_Layer": "0",
    "Segment91_Name": "Sacrum",
    "Segment91_NameAutoGenerated": "1",
    "Segment91_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^54735007^Sacrum~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment92_Color": "0.498039 0.498039 0.498039",
    "Segment92_ColorAutoGenerated": "1",
    "Segment92_ID": "face",
    "Segment92_LabelValue": "93",
    "Segment92_Layer": "0",
    "Segment92_Name": "Face",
    "Segment92_NameAutoGenerated": "1",
    "Segment92_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^89545001^Face~^^~Anatomic codes - DICOM master list~^^~^^||",
    "Segment93_Color": "0.737255 0.372549 0.298039",
    "Segment93_ColorAutoGenerated": "1",
    "Segment93_ID": "gluteus_maximus_left",
    "Segment93_LabelValue": "94",
    "Segment93_Layer": "0",
    "Segment93_Name": "left gluteus maximus",
    "Segment93_NameAutoGenerated": "1",
    "Segment93_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^181674001^Gluteus maximus muscle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment94_Color": "0.737255 0.372549 0.298039",
    "Segment94_ColorAutoGenerated": "1",
    "Segment94_ID": "gluteus_maximus_right",
    "Segment94_LabelValue": "95",
    "Segment94_Layer": "0",
    "Segment94_Name": "right gluteus maximus",
    "Segment94_NameAutoGenerated": "1",
    "Segment94_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^181674001^Gluteus maximus muscle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment95_Color": "0.698039 0.411765 0.298039",
    "Segment95_ColorAutoGenerated": "1",
    "Segment95_ID": "gluteus_medius_left",
    "Segment95_LabelValue": "96",
    "Segment95_Layer": "0",
    "Segment95_Name": "left gluteus medius",
    "Segment95_NameAutoGenerated": "1",
    "Segment95_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78333006^Gluteus medius muscle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment96_Color": "0.698039 0.411765 0.298039",
    "Segment96_ColorAutoGenerated": "1",
    "Segment96_ID": "gluteus_medius_right",
    "Segment96_LabelValue": "97",
    "Segment96_Layer": "0",
    "Segment96_Name": "right gluteus medius",
    "Segment96_NameAutoGenerated": "1",
    "Segment96_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78333006^Gluteus medius muscle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment97_Color": "0.698039 0.411765 0.298039",
    "Segment97_ColorAutoGenerated": "1",
    "Segment97_ID": "gluteus_minimus_left",
    "Segment97_LabelValue": "98",
    "Segment97_Layer": "0",
    "Segment97_Name": "left gluteus medius",
    "Segment97_NameAutoGenerated": "1",
    "Segment97_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78333006^Gluteus medius muscle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment98_Color": "0.698039 0.411765 0.298039",
    "Segment98_ColorAutoGenerated": "1",
    "Segment98_ID": "gluteus_minimus_right",
    "Segment98_LabelValue": "99",
    "Segment98_Layer": "0",
    "Segment98_Name": "right gluteus medius",
    "Segment98_NameAutoGenerated": "1",
    "Segment98_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^78333006^Gluteus medius muscle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment99_Color": "0.670588 0.333333 0.266667",
    "Segment99_ColorAutoGenerated": "1",
    "Segment99_ID": "autochthon_left",
    "Segment99_LabelValue": "100",
    "Segment99_Layer": "0",
    "Segment99_Name": "left erector spinae muscle",
    "Segment99_NameAutoGenerated": "1",
    "Segment99_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^44947003^Erector spinae muscle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment100_Color": "0.670588 0.333333 0.266667",
    "Segment100_ColorAutoGenerated": "1",
    "Segment100_ID": "autochthon_right",
    "Segment100_LabelValue": "101",
    "Segment100_Layer": "0",
    "Segment100_Name": "right erector spinae muscle",
    "Segment100_NameAutoGenerated": "1",
    "Segment100_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^44947003^Erector spinae muscle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment101_Color": "0.737255 0.372549 0.298039",
    "Segment101_ColorAutoGenerated": "1",
    "Segment101_ID": "iliopsoas_left",
    "Segment101_LabelValue": "102",
    "Segment101_Layer": "0",
    "Segment101_Name": "left iliopsoas muscle",
    "Segment101_NameAutoGenerated": "1",
    "Segment101_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^68455001^Iliopsoas muscle~SCT^7771000^Left~Anatomic codes - DICOM master list~^^~^^||",
    "Segment102_Color": "0.737255 0.372549 0.298039",
    "Segment102_ColorAutoGenerated": "1",
    "Segment102_ID": "iliopsoas_right",
    "Segment102_LabelValue": "103",
    "Segment102_Layer": "0",
    "Segment102_Name": "right iliopsoas muscle",
    "Segment102_NameAutoGenerated": "1",
    "Segment102_Tags": "TerminologyEntry:Segmentation category and type - Total Segmentator~SCT^123037004^Anatomical Structure~SCT^68455001^Iliopsoas muscle~SCT^24028007^Right~Anatomic codes - DICOM master list~^^~^^||",
    "Segment103_Color": "0.870588 0.603922 0.517647",
    "Segment103_ColorAutoGenerated": "1",
    "Segment103_ID": "urinary_bladder",
    "Segment103_LabelValue": "104",
    "Segment103_Layer": "0",
    "Segment103_Name": "urinary bladder",
    "Segment103_NameAutoGenerated": "1",
    "Segment103_Tags": "TerminologyEntry:Segmentation category and type - DICOM master list~SCT^123037004^Anatomical Structure~SCT^89837001^Bladder~^^~Anatomic codes - DICOM master list~^^~^^||",
}


def convert_total(nifti_in: str, nrrd_out: str):
    from totalsegmentator.slicer import TOTAL_METADATA

    # concert to nrrd
    img = sitk.ReadImage(nifti_in)
    sitk.WriteImage(img, nrrd_out, useCompression=True, compressionLevel=9)

    # add slicer segmentation metadata and resave
    data, header = nrrd.read(nrrd_out)
    header.update(TOTAL_METADATA)
    nrrd.write(nrrd_out, data, header)


if __name__ == "__main__":
    """
    Combine binary labels into a binary file.

    Works with any number of label files.

    Usage:
    totalseg_combine_masks -i totalsegmentator_output_dir -o combined_mask.nii.gz -m lung
    """
    parser = argparse.ArgumentParser(
        description="Combine masks.",
        epilog="Written by Jakob Wasserthal. If you use this tool please cite https://arxiv.org/abs/2208.05868",
    )

    parser.add_argument(
        "-i",
        metavar="nifti_in",
        dest="nifti_in",
        help="TotalSegmentator path to combined nifti segmentation",
        type=lambda p: Path(p).absolute(),
        required=True,
    )

    parser.add_argument(
        "-o",
        metavar="nrrd_out",
        dest="nrrd_out",
        help="Output path to save 3DSlicer nrrd file. Expects extension of '.seg.nrrd'",
        type=lambda p: Path(p).absolute(),
        required=True,
    )

    parser.add_argument(
        "-ta",
        "--task",
        type=str,
        choices=[
            "total",
            "lung_vessels",
            "cerebral_bleed",
            "hip_implant",
            "coronary_arteries",
            "body",
            "pleural_pericard_effusion",
            "test",
        ],
        help="The TotalSegmentator task that created the input mask file",
        required=True,
    )

    args = parser.parse_args()

    assert args.nrrd_out.suffix == ".nrrd", "requires '.nrrd' extension for output file"

    if args.task == "total":
        convert_total(str(args.nifti_in), str(args.nrrd_out))
    else:
        raise ValueError(
            "Only 'total' task segmentations can currently be converted to 3DSlicer seg.nrrd format"
        )
